<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estrat√©gia Penny Product: Imers√£o & ROI</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

    <!-- Design Configuration & Palette -->
    <!-- 
        Palette Selected: "Fintech Growth"
        Primary: #3730a3 (Indigo-800)
        Secondary: #0d9488 (Teal-600)
        Accent: #f59e0b (Amber-500)
        Background: #f8fafc (Slate-50)
    -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            dark: '#312e81', // Indigo 900
                            primary: '#4338ca', // Indigo 700
                            secondary: '#0d9488', // Teal 600
                            accent: '#f59e0b', // Amber 500
                            light: '#e0e7ff', // Indigo 100
                            bg: '#f8fafc' // Slate 50
                        }
                    }
                }
            }
        }
    </script>

    <style>
        /* Chart Container Styling Rules */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px; /* Constrain max width for readability */
            margin-left: auto;
            margin-right: auto;
            height: 350px; /* Default height */
            max-height: 450px;
        }

        /* Responsive adjustments for chart height */
        @media (max-width: 640px) {
            .chart-container {
                height: 280px;
            }
        }

        /* Custom Utilities */
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(226, 232, 240, 0.8);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #312e81 0%, #0d9488 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .step-connector::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            width: 2px;
            height: 24px;
            background-color: #cbd5e1;
            transform: translateX(-50%);
            z-index: 0;
        }
        
        .last-step::after {
            display: none;
        }

        @media (min-width: 768px) {
            .step-connector::after {
                top: 50%;
                left: 100%;
                width: 24px;
                height: 2px;
                transform: translateY(-50%);
            }
        }
    </style>
    
    <!-- 
        PLAN SUMMARY:
        1. Intro: Define Penny Product & Strategic Goals.
        2. Benchmark: "Unlock Imers√£o" Case Study KPI Cards.
        3. Financials: Chart showing Revenue Scenarios (R$5 vs R$17).
        4. CPA Strategy: Line Chart showing Max CPA Capacity.
        5. Offer: Comparison Cards (Essential vs Pro).
        6. Test Structure: Flow Diagram + Donut Chart.
        7. Conclusion: Strategic Recap.
        
        NO SVG USED. NO MERMAID USED.
    -->
</head>
<body class="bg-brand-bg text-slate-800 antialiased selection:bg-brand-secondary selection:text-white">

    <!-- Header Section -->
    <header class="w-full bg-white shadow-sm border-b border-gray-100 py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-5xl mx-auto text-center">
            <span class="inline-block py-1 px-3 rounded-full bg-brand-light text-brand-primary text-xs font-bold tracking-wider uppercase mb-4">Estrat√©gia de Monetiza√ß√£o</span>
            <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight mb-4">
                <span class="gradient-text">Penny Product</span> na Imers√£o
            </h1>
            <p class="text-lg md:text-xl text-slate-500 max-w-3xl mx-auto">
                Transformando a p√°gina de obrigado em uma alavanca de qualifica√ß√£o, receita antecipada e escala estrutural.
            </p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 space-y-16">


                <!-- ===================================================== -->
<!-- SECTION: PROBLEMA ATUAL VS SOLU√á√ÉO PENNY PRODUCT -->
<!-- ===================================================== -->
<section class="grid grid-cols-1 md:grid-cols-2 gap-8 items-start">

    <!-- CARD 1: PROBLEMA ATUAL -->
    <div class="bg-white p-8 rounded-xl shadow-md border-l-8 border-brand-secondary">
        <h2 class="text-2xl font-bold text-gray-800 mb-4">O Problema Atual</h2>

        <!-- Contexto atual da opera√ß√£o -->
        <p class="text-gray-600 mb-4">
            Hoje, a imers√£o √© 100% gratuita com um CPL m√©dio de R$8.
            A convers√£o para o "Plano Full" depende exclusivamente de engajamento
            e nutri√ß√£o durante o evento.
        </p>

        <!-- Bloco de risco estrat√©gico -->
        <div class="bg-red-50 p-4 rounded-lg">
            <p class="font-semibold text-red-700">‚ùå Risco:</p>
            <p class="text-red-600 text-sm">
                Leads com baixo compromisso psicol√≥gico ("s√≥ mais um cadastro")
                diluem a taxa de convers√£o final.
            </p>
        </div>
    </div>

</section>

        <!-- Section 1: Concept Definition -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            <div>
                <h2 class="text-3xl font-bold text-slate-900 mb-6 border-l-4 border-brand-secondary pl-4">O Que √© o Penny Product?</h2>
                <p class="text-slate-600 mb-4 leading-relaxed">
                    N√£o √© apenas uma venda. √â uma <strong>camada estrat√©gica de qualifica√ß√£o</strong>. O Penny Product √© uma oferta de baixo ticket (R$5 e/ou R$17) apresentada imediatamente na "Thank You Page" (TYP) da imers√£o gratuita.
                </p>
                <p class="text-slate-600 mb-6 leading-relaxed">
                    Ao criar um micro-compromisso financeiro, identificamos leads com <strong>maior inten√ß√£o de compra</strong> para o produto principal (High Ticket), enquanto geramos caixa para abater custos operacionais.
                </p>
                
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-100">
                        <div class="text-brand-primary text-2xl font-bold mb-1">üîç</div>
                        <h3 class="font-semibold text-slate-900">Filtro de Inten√ß√£o</h3>
                        <p class="text-xs text-slate-500">Quem paga, engaja mais.</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-100">
                        <div class="text-brand-secondary text-2xl font-bold mb-1">üí∞</div>
                        <h3 class="font-semibold text-slate-900">Receita Antecipada</h3>
                        <p class="text-xs text-slate-500">Cashflow imediato.</p>
                    </div>
                </div>
            </div>
            
            <div class="bg-gradient-to-br from-brand-dark to-brand-primary rounded-2xl p-8 text-white shadow-xl relative overflow-hidden">
                <div class="absolute top-0 right-0 opacity-10 text-9xl font-black -mr-4 -mt-4">R$</div>
                <h3 class="text-2xl font-bold mb-6">Objetivos Centrais</h3>
                <ul class="space-y-4">
                    <li class="flex items-start">
                        <span class="flex-shrink-0 h-6 w-6 rounded-full bg-brand-accent flex items-center justify-center text-xs font-bold text-white mt-1 mr-3">1</span>
                        <span><strong>Reduzir Risco:</strong> Diminuir a exposi√ß√£o financeira da opera√ß√£o e de tr√°fego.</span>
                    </li>
                    <li class="flex items-start">
                        <span class="flex-shrink-0 h-6 w-6 rounded-full bg-brand-accent flex items-center justify-center text-xs font-bold text-white mt-1 mr-3">2</span>
                        <span><strong>Validar Lead:</strong> O cart√£o de cr√©dito √© o melhor validador de interesse.</span>
                    </li>
                    <li class="flex items-start">
                        <span class="flex-shrink-0 h-6 w-6 rounded-full bg-brand-accent flex items-center justify-center text-xs font-bold text-white mt-1 mr-3">3</span>
                        <span><strong>Escalar CPA:</strong> Aumentar o teto de gasto por lead sustent√°vel.</span>
                    </li>
                </ul>
            </div>
        </section>


        <!-- Section 2: Case Study Data -->
        <section class="bg-slate-50 rounded-3xl p-8 md:p-12 border border-slate-200">
            <div class="mb-8">
                <h2 class="text-2xl font-bold text-slate-900 mb-2">Hist√≥rico de Valida√ß√£o: Imers√£o Unlock</h2>
                <p class="text-slate-600">
                    Dados reais da edi√ß√£o anterior mostram que existe disposi√ß√£o de compra na p√°gina de obrigado, mesmo com tickets mais elevados que o Penny tradicional.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div class="glass-card p-6 rounded-xl shadow-sm text-center transform transition hover:-translate-y-1">
                    <div class="text-sm text-slate-500 font-medium uppercase tracking-wide mb-2">Ticket M√©dio</div>
                    <div class="text-3xl font-bold text-brand-dark">R$ 79,90</div>
                    <div class="text-xs text-green-600 font-semibold mt-1">Oferta Agentes IA</div>
                </div>
                
                <div class="glass-card p-6 rounded-xl shadow-sm text-center transform transition hover:-translate-y-1">
                    <div class="text-sm text-slate-500 font-medium uppercase tracking-wide mb-2">Convers√£o TYP</div>
                    <div class="text-3xl font-bold text-brand-secondary">1,9%</div>
                    <div class="text-xs text-slate-400 mt-1">Imediata</div>
                </div>

                <div class="glass-card p-6 rounded-xl shadow-sm text-center transform transition hover:-translate-y-1">
                    <div class="text-sm text-slate-500 font-medium uppercase tracking-wide mb-2">Compradores</div>
                    <div class="text-3xl font-bold text-slate-800">79</div>
                    <div class="text-xs text-slate-400 mt-1">Total de Vendas</div>
                </div>

                <div class="glass-card p-6 rounded-xl shadow-sm text-center transform transition hover:-translate-y-1">
                    <div class="text-sm text-slate-500 font-medium uppercase tracking-wide mb-2">Perfil</div>
                    <div class="text-3xl font-bold text-brand-accent">85%</div>
                    <div class="text-xs text-slate-400 mt-1">N√£o eram alunos</div>
                </div>
            </div>
        </section>


        <!-- ===================================================== -->
<!-- SECTION: PAINEL EXECUTIVO (RESULTADO ESPERADO + MIX) -->
<!-- ===================================================== -->
<section class="bg-white p-8 rounded-2xl shadow-md border border-slate-100">
  <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-6 mb-8">
    <div>
      <h2 class="text-3xl font-bold text-slate-900 mb-2 border-l-4 border-brand-secondary pl-4">
        Resultado Esperado (Mix + Sensibilidade)
      </h2>
      <p class="text-slate-600 max-w-3xl">
        Painel vivo baseado nas premissas do modelo. Ajuste as taxas e veja impacto no mix de planos, receita total,
        RPL (receita por lead), margem por lead e break-even estrutural.
      </p>
    </div>

    <!-- Mini legenda -->
    <div class="text-xs text-slate-500 bg-slate-50 border border-slate-200 rounded-xl p-4">
      <div class="font-semibold text-slate-700 mb-1">Leitura r√°pida</div>
      <div>‚Ä¢ <strong>RPL</strong> = Receita Total / Inscritos</div>
      <div>‚Ä¢ <strong>Margem/Lead</strong> = RPL - CPL</div>
      <div>‚Ä¢ <strong>Incremento</strong> = Penny vs Atual</div>
    </div>
  </div>

  <!-- Inputs -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <div class="text-xs font-semibold text-slate-600 mb-2">Base (inscritos)</div>
      <input id="inpBase" type="number" value="41000" class="w-full rounded-lg border border-slate-300 p-2 text-sm" />
      <div class="text-xs text-slate-500 mt-2">Ex: 41.000 (50% da base total)</div>
    </div>

    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <div class="text-xs font-semibold text-slate-600 mb-2">CPL m√©dio (R$)</div>
      <input id="inpCPL" type="number" step="0.01" value="8" class="w-full rounded-lg border border-slate-300 p-2 text-sm" />
      <div class="text-xs text-slate-500 mt-2">Impacta margem/lead</div>
    </div>

    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <div class="text-xs font-semibold text-slate-600 mb-2">Custo fixo (R$)</div>
      <input id="inpFixed" type="number" value="25000" class="w-full rounded-lg border border-slate-300 p-2 text-sm" />
      <div class="text-xs text-slate-500 mt-2">Break-even estrutural</div>
    </div>

    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <div class="text-xs font-semibold text-slate-600 mb-2">Ticket Plano Full (R$)</div>
      <input id="inpFullTicket" type="number" value="1200" class="w-full rounded-lg border border-slate-300 p-2 text-sm" />
      <div class="text-xs text-slate-500 mt-2">TM usado no modelo</div>
    </div>

    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <div class="text-xs font-semibold text-slate-600 mb-2">% Convers√£o Penny (total)</div>
      <input id="inpPennyConv" type="number" step="0.01" value="2.44" class="w-full rounded-lg border border-slate-300 p-2 text-sm" />
      <div class="text-xs text-slate-500 mt-2">Ex: 2,44%</div>
    </div>

    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <div class="text-xs font-semibold text-slate-600 mb-2">Split: % escolhe R$5</div>
      <input id="inpSplit5" type="number" step="1" value="70" class="w-full rounded-lg border border-slate-300 p-2 text-sm" />
      <div class="text-xs text-slate-500 mt-2">R$17 = 100 - R$5</div>
    </div>

    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <div class="text-xs font-semibold text-slate-600 mb-2">Conv. Full (controle)</div>
      <input id="inpFullCtrl" type="number" step="0.01" value="0.80" class="w-full rounded-lg border border-slate-300 p-2 text-sm" />
      <div class="text-xs text-slate-500 mt-2">Sem penny</div>
    </div>

    <div class="bg-slate-50 border border-slate-200 rounded-xl p-4">
      <div class="text-xs font-semibold text-slate-600 mb-2">Conv. Full (comprador)</div>
      <input id="inpFullBuyer" type="number" step="0.01" value="3.00" class="w-full rounded-lg border border-slate-300 p-2 text-sm" />
      <div class="text-xs text-slate-500 mt-2">Aplicada aos clusters R$5 e R$17</div>
    </div>
  </div>

  <!-- KPI Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    <div class="glass-card p-6 rounded-xl shadow-sm">
      <div class="text-xs text-slate-500 font-semibold uppercase tracking-wide mb-2">Receita total (com penny)</div>
      <div id="kpiTotalRevenue" class="text-3xl font-extrabold text-slate-900">‚Äî</div>
      <div id="kpiTotalRevenueNote" class="text-xs text-slate-500 mt-2">‚Äî</div>
    </div>

    <div class="glass-card p-6 rounded-xl shadow-sm">
      <div class="text-xs text-slate-500 font-semibold uppercase tracking-wide mb-2">RPL (Receita por lead)</div>
      <div id="kpiRPL" class="text-3xl font-extrabold text-slate-900">‚Äî</div>
      <div id="kpiMargin" class="text-xs text-slate-500 mt-2">‚Äî</div>
    </div>

    <div class="glass-card p-6 rounded-xl shadow-sm">
      <div class="text-xs text-slate-500 font-semibold uppercase tracking-wide mb-2">Incremento vs atual</div>
      <div id="kpiIncrement" class="text-3xl font-extrabold text-slate-900">‚Äî</div>
      <div id="kpiIncrementNote" class="text-xs text-slate-500 mt-2">‚Äî</div>
    </div>

    <div class="glass-card p-6 rounded-xl shadow-sm">
      <div class="text-xs text-slate-500 font-semibold uppercase tracking-wide mb-2">Break-even estrutural</div>
      <div id="kpiBE" class="text-3xl font-extrabold text-slate-900">‚Äî</div>
      <div id="kpiCPAMax" class="text-xs text-slate-500 mt-2">‚Äî</div>
    </div>
  </div>

  <!-- Charts -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mt-10">
    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 lg:col-span-1">
      <h3 class="font-bold text-center mb-4 text-slate-700">Mix de Compradores (R$5 vs R$17)</h3>
      <div class="chart-container" style="height: 260px;">
        <canvas id="mixBuyersChart"></canvas>
      </div>
      <div class="text-xs text-slate-500 mt-4">
        Mostra a distribui√ß√£o do penny (quem paga R$5 vs R$17).
      </div>
    </div>

    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-100 lg:col-span-2">
      <h3 class="font-bold text-center mb-4 text-slate-700">Receita por Fonte (Penny vs Full)</h3>
      <div class="chart-container">
        <canvas id="revenueSplitChart"></canvas>
      </div>
      <div class="text-xs text-slate-500 mt-4">
        O que importa aqui √© o efeito do penny como qualificador: o grosso vem do Full, mas o penny aumenta RPL e o teto de escala.
      </div>
    </div>
  </div>
</section>

<!-- ===================================================== -->
<!-- SECTION: SENSIBILIDADE (HEATMAP) -->
<!-- ===================================================== -->
<section class="bg-slate-50 rounded-3xl p-8 md:p-12 border border-slate-200">
  <div class="mb-8">
    <h2 class="text-2xl font-bold text-slate-900 mb-2">Sensibilidade: Convers√£o Penny x Convers√£o Full</h2>
    <p class="text-slate-600 max-w-4xl">
      Heatmap do <strong>RPL</strong> (Receita por Lead) e da <strong>Margem/Lead</strong> (RPL - CPL) variando
      <strong>% Penny</strong> e <strong>Convers√£o Full (controle)</strong>. Mant√©m constante o split de planos e a convers√£o de comprador (uplift).
    </p>
  </div>

  <div class="bg-white rounded-2xl border border-slate-200 overflow-hidden">
    <div class="p-4 border-b border-slate-200 flex flex-col md:flex-row md:items-center md:justify-between gap-3">
      <div class="text-sm text-slate-700 font-semibold">M√©trica exibida</div>
      <div class="flex items-center gap-3 text-sm">
        <button id="btnHeatRPL" class="px-3 py-2 rounded-lg bg-slate-900 text-white">RPL</button>
        <button id="btnHeatMargin" class="px-3 py-2 rounded-lg bg-white border border-slate-300 text-slate-700">Margem/Lead</button>
      </div>
    </div>
    <div class="p-4 overflow-auto">
      <div id="heatmapContainer" class="min-w-[900px]"></div>
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6 text-xs text-slate-600">
    <div class="bg-white border border-slate-200 rounded-xl p-4">
      <div class="font-semibold text-slate-700 mb-1">Como usar</div>
      <div>1) Ajuste as premissas no painel acima.</div>
      <div>2) Veja onde o RPL passa o CPL com folga.</div>
    </div>
    <div class="bg-white border border-slate-200 rounded-xl p-4">
      <div class="font-semibold text-slate-700 mb-1">Leitura</div>
      <div>C√©lulas ‚Äúmais escuras‚Äù = mais valor (RPL ou margem maior).</div>
    </div>
    <div class="bg-white border border-slate-200 rounded-xl p-4">
      <div class="font-semibold text-slate-700 mb-1">Decis√£o</div>
      <div>Se a margem/lead ficar apertada, o objetivo vira: aumentar %penny, ou aumentar uplift de comprador, ou subir conv full.</div>
    </div>
  </div>
</section>

        <!-- Section 4: Deliverables Table -->
        <section class="bg-brand-dark rounded-3xl p-8 md:p-12 text-white">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold mb-4">O Que Vamos Entregar?</h2>
                <p class="text-indigo-200 max-w-2xl mx-auto">
                    A oferta precisa ser irresist√≠vel (no-brainer) e complementar √† imers√£o, sem concorrer com a assinatura principal.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <!-- Plan 1 -->
                <div class="bg-indigo-900/50 border border-indigo-700 rounded-2xl p-8 hover:bg-indigo-800 transition duration-300">
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <h3 class="text-xl font-bold text-white">Plano Essencial</h3>
                            <div class="text-indigo-300 text-sm mt-1">Entrada</div>
                        </div>
                        <div class="text-3xl font-bold text-white">R$ 5</div>
                    </div>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-center text-indigo-100">
                            <span class="mr-2 text-brand-secondary">‚úì</span> Ebook Oficial da Imers√£o
                        </li>
                        <li class="flex items-center text-indigo-100">
                            <span class="mr-2 text-brand-secondary">‚úì</span> 1 V√≠deo Exclusivo Complementar
                        </li>
                        <li class="flex items-center text-indigo-400 opacity-60">
                            <span class="mr-2">‚úï</span> Materiais B√¥nus
                        </li>
                    </ul>
                    <button class="w-full py-3 rounded-lg bg-indigo-600 text-white font-semibold text-sm opacity-80 cursor-default">Op√ß√£o de Entrada</button>
                </div>

                <!-- Plan 2 -->
                <div class="bg-white text-slate-900 rounded-2xl p-8 relative shadow-2xl transform md:-translate-y-4">
                    <div class="absolute top-0 right-0 bg-brand-accent text-white text-xs font-bold px-3 py-1 rounded-bl-lg rounded-tr-lg">MELHOR VALOR</div>
                    <div class="flex justify-between items-start mb-6">
                        <div>
                            <h3 class="text-xl font-bold text-brand-primary">Plano Pro</h3>
                            <div class="text-slate-500 text-sm mt-1">Recomendado</div>
                        </div>
                        <div class="text-3xl font-bold text-brand-dark">R$ 17</div>
                    </div>
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-center text-slate-700">
                            <span class="mr-2 text-brand-secondary font-bold">‚úì</span> Ebook Oficial da Imers√£o
                        </li>
                        <li class="flex items-center text-slate-700">
                            <span class="mr-2 text-brand-secondary font-bold">‚úì</span> <strong class="ml-1">3 V√≠deos</strong> Exclusivos
                        </li>
                        <li class="flex items-center text-slate-700">
                            <span class="mr-2 text-brand-secondary font-bold">‚úì</span> Pack de Materiais B√¥nus
                        </li>
                        <li class="flex items-center text-slate-700">
                            <span class="mr-2 text-brand-secondary font-bold">‚úì</span> Destaque na Comunidade
                        </li>
                    </ul>
                    <button class="w-full py-3 rounded-lg bg-brand-primary text-white font-semibold text-sm shadow-lg hover:bg-brand-dark transition">Oferta Principal</button>
                </div>
            </div>
        </section>

     <!-- SE√á√ÉO 5: DESENHO DO EXPERIMENTO (NO FINAL) -->
        <section class="space-y-8 pt-12 border-t border-border">
            <div class="text-center space-y-2">
                <h2 class="text-2xl font-bold text-white">Desenho Experimental</h2>
                <p class="text-slate-500 text-sm">Split 50/50 com controle absoluto para valida√ß√£o estat√≠stica.</p>
            </div>

            <div class="max-w-3xl mx-auto">
                <!-- Level 1 -->
                <div class="glass-card p-4 w-48 mx-auto text-center text-sm font-bold border-slate-700">Inscritos (100%)</div>
                <div class="connector-v"></div>
                <div class="connector-h max-w-md mx-auto"></div>
                
                <!-- Level 2 Branches -->
                <div class="flex justify-center gap-12 max-w-4xl mx-auto">
                    <!-- Left: Control -->
                    <div class="w-1/2 flex flex-col items-center">
                        <div class="connector-v"></div>
                        <div class="glass-card p-4 w-full text-center border-dashed opacity-50">
                            <div class="text-xs font-bold text-slate-500 uppercase">Grupo Controle (50%)</div>
                            <div class="text-[10px] mt-1 text-slate-600">Sem Popup / Fluxo Padr√£o</div>
                        </div>
                    </div>

                    <!-- Right: Treatment -->
                    <div class="w-1/2 flex flex-col items-center">
                        <div class="connector-v"></div>
                        <div class="glass-card p-4 w-full text-center border-primary/50 bg-primary/5">
                            <div class="text-xs font-bold text-primary uppercase">Tratamento (50%)</div>
                            <div class="text-[10px] mt-1 text-primary/70">Popup TYP (R$5 vs R$17)</div>
                        </div>
                        
                        <div class="connector-v"></div>
                        <!-- Email Layer -->
                        <div class="glass-card p-4 w-full text-center border-slate-700 bg-surface">
                            <div class="text-xs font-bold text-slate-300 uppercase">E-mail Segmentado</div>
                            <p class="text-[9px] text-slate-500 mt-2">Split interno 50/50: Metade recebe oferta complementar via e-mail p√≥s-pesquisa.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-12">
                <div class="text-center p-4">
                    <div class="text-xs text-slate-500 uppercase mb-1">Dura√ß√£o</div>
                    <div class="text-sm font-bold text-white">Full Cohort</div>
                </div>
                <div class="text-center p-4">
                    <div class="text-xs text-slate-500 uppercase mb-1">Metodologia</div>
                    <div class="text-sm font-bold text-white">A/B Split</div>
                </div>
                <div class="text-center p-4">
                    <div class="text-xs text-slate-500 uppercase mb-1">Risco</div>
                    <div class="text-sm font-bold text-success uppercase">Baixo</div>
                </div>
                <div class="text-center p-4">
                    <div class="text-xs text-slate-500 uppercase mb-1">Status</div>
                    <div class="text-sm font-bold text-primary uppercase italic">Ready</div>
                </div>
            </div>
        </section>
        <!-- Conclusion -->
        <footer class="text-center py-12 border-t border-slate-200 mt-12">
            <h2 class="text-2xl font-bold text-slate-800 mb-4">Conclus√£o Estrat√©gica</h2>
            <p class="max-w-3xl mx-auto text-slate-600 mb-8">
                O Penny Product n√£o √© sobre "vender um ebook". √â sobre <strong>construir previsibilidade</strong>. Ao aumentar a convers√£o do plano Full em poucos pontos percentuais atrav√©s da qualifica√ß√£o financeira, multiplicamos o ROI e a seguran√ßa para escalar a m√≠dia paga.
            </p>
            <div class="inline-flex items-center space-x-2 text-sm text-slate-400">
                <span>Gerado por Canvas Infographics</span>
                <span>‚Ä¢</span>
                <span>Dados Simulados</span>
            </div>
        </footer>

    </main>

    <!-- Chart.js Implementation Script -->
    <script>
        // --- UTILITY: LABEL WRAPPING FOR CHART.JS ---
        // Splits long strings into arrays of shorter strings for Chart.js
        function wrapLabel(label, maxChars = 16) {
            if (label.length <= maxChars) return label;
            
            const words = label.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if ((currentLine + " " + words[i]).length <= maxChars) {
                    currentLine += " " + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // --- SHARED TOOLTIP CONFIGURATION ---
        // Ensures multi-line labels (arrays) are displayed correctly in tooltips
        const sharedTooltipConfig = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        // --- SHARED CHART DEFAULTS ---
        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.color = '#64748b'; // Slate-500
        Chart.defaults.scale.grid.color = '#e2e8f0'; // Slate-200
        Chart.defaults.plugins.legend.labels.usePointStyle = true;

        // --- CHART 1: REVENUE PROJECTION (Grouped Bar) ---
        const ctxRevenue = document.getElementById('revenueChart').getContext('2d');
        
        // Data Preparation
        const scenarios = [
            'Cen√°rio M√≠nimo (1.7%)', 
            'Cen√°rio Realista (3%)', 
            'Cen√°rio Forte (5%)', 
            'Cen√°rio Otimizado (8%)'
        ];
        
        // Apply Label Wrapping
        const wrappedScenarios = scenarios.map(s => wrapLabel(s, 16));

        // Data from text:
        // R$5 Penny Total: 25.4k, 41k, 65k, 101k
        // R$17 Penny Total: 37.4k, 53k, 77k, 113k
        
        new Chart(ctxRevenue, {
            type: 'bar',
            data: {
                labels: wrappedScenarios,
                datasets: [
                    {
                        label: 'Penny R$ 5 + Full',
                        data: [25400, 41000, 65000, 101000],
                        backgroundColor: '#4338ca', // Brand Primary
                        borderRadius: 6,
                    },
                    {
                        label: 'Penny R$ 17 + Full',
                        data: [37400, 53000, 77000, 113000],
                        backgroundColor: '#0d9488', // Brand Secondary
                        borderRadius: 6,
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    tooltip: sharedTooltipConfig,
                    legend: {
                        position: 'top',
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Receita Total (R$)'
                        },
                        ticks: {
                            callback: function(value) {
                                return 'R$ ' + value / 1000 + 'k';
                            }
                        }
                    }
                }
            }
        });

        // --- CHART 2: MAX CPA (Line Chart) ---
        const ctxCPA = document.getElementById('cpaChart').getContext('2d');
        
        // Data from text:
        // R$5 Scenario CPA Max: 0.40, 16, 40, 76
        // R$17 Scenario CPA Max: 12.40, 28, 52, 88
        
        new Chart(ctxCPA, {
            type: 'line',
            data: {
                labels: wrappedScenarios, // Reusing wrapped labels
                datasets: [
                    {
                        label: 'CPA Max (Penny R$ 5)',
                        data: [0.40, 16, 40, 76],
                        borderColor: '#4338ca',
                        backgroundColor: '#4338ca',
                        tension: 0.3,
                        pointRadius: 6,
                        pointHoverRadius: 8
                    },
                    {
                        label: 'CPA Max (Penny R$ 17)',
                        data: [12.40, 28, 52, 88],
                        borderColor: '#0d9488',
                        backgroundColor: '#0d9488',
                        tension: 0.3,
                        pointRadius: 6,
                        pointHoverRadius: 8
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    tooltip: sharedTooltipConfig,
                    legend: {
                        position: 'top',
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'CPA M√°ximo Sustent√°vel (R$)'
                        },
                        ticks: {
                            callback: function(value) {
                                return 'R$ ' + value;
                            }
                        }
                    }
                }
            }
        });

        // --- CHART 3: SPLIT TEST (Donut) ---
        const ctxSplit = document.getElementById('splitChart').getContext('2d');
        
        const splitLabels = ['Grupo Controle (Sem Oferta)', 'Grupo Tratamento (Com Penny)'];
        const wrappedSplitLabels = splitLabels.map(l => wrapLabel(l, 20));

        new Chart(ctxSplit, {
            type: 'doughnut',
            data: {
                labels: wrappedSplitLabels,
                datasets: [{
                    data: [50, 50],
                    backgroundColor: [
                        '#cbd5e1', // Slate-300
                        '#f59e0b'  // Brand Accent
                    ],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '65%',
                plugins: {
                    tooltip: sharedTooltipConfig,
                    legend: {
                        position: 'bottom',
                        labels: {
                            font: {
                                size: 10
                            }
                        }
                    }
                }
            }
        });
        // =====================================================
// CHART 4: RECEITA DIRETA VS CUSTO FIXO
// =====================================================

// Contexto:
// Simula√ß√£o considerando 1.000 compradores para cada ticket
// Custo fixo da opera√ß√£o: R$ 25.000

const ctxDirectRevenue = document.getElementById('directRevenueChart').getContext('2d');

new Chart(ctxDirectRevenue, {
    type: 'bar',
    data: {
        labels: ['Ticket R$ 5', 'Ticket R$ 17'],
        datasets: [
            {
                label: 'Receita com 1.000 compradores',
                data: [5000, 17000],
                backgroundColor: ['#4338ca', '#0d9488'],
                borderRadius: 6
            },
            {
                label: 'Custo Fixo da Imers√£o',
                data: [25000, 25000],
                backgroundColor: '#f59e0b',
                borderRadius: 6
            }
        ]
    },
    options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
            legend: {
                position: 'top'
            }
        },
        scales: {
            y: {
                beginAtZero: true,
                title: {
                    display: true,
                    text: 'Valor (R$)'
                },
                ticks: {
                    callback: function(value) {
                        return 'R$ ' + value;
                    }
                }
            }
        }
    }
});

    </script>
    <script>
  // ============================
  // NOVO: Fun√ß√µes utilit√°rias
  // ============================
  function asNumber(id) {
    const el = document.getElementById(id);
    if (!el) return 0;
    const v = (el.value || "").toString().replace(",", ".");
    return Number(v) || 0;
  }

  function pctToDec(pct) { return (pct || 0) / 100; }

  function formatBRL(n) {
    return (n || 0).toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
  }

  function formatPct(p) {
    return (p || 0).toLocaleString('pt-BR', { minimumFractionDigits: 1, maximumFractionDigits: 1 }) + '%';
  }

  function clamp01(x) { return Math.max(0, Math.min(1, x)); }

  // ============================
  // NOVO: Modelo (mix + clusters)
  // ============================
  function computeModel(params) {
    const base = params.base;
    const cpl = params.cpl;
    const fixed = params.fixed;
    const fullTicket = params.fullTicket;

    const pennyConv = params.pennyConv; // decimal
    const split5 = params.split5;       // decimal
    const split17 = 1 - split5;

    const fullCtrl = params.fullCtrl;     // decimal
    const fullBuyer = params.fullBuyer;   // decimal (aplicado a compradores)

    // Buyers (penny)
    const buyersTotal = base * pennyConv;
    const buyers5 = buyersTotal * split5;
    const buyers17 = buyersTotal * split17;

    // Penny revenue
    const revenuePenny = buyers5 * 5 + buyers17 * 17;

    // Full revenue: clusterizado
    const nonBuyers = base - buyersTotal;

    const salesCtrl = nonBuyers * fullCtrl;
    const sales5 = buyers5 * fullBuyer;
    const sales17 = buyers17 * fullBuyer;

    const revenueFull = (salesCtrl + sales5 + sales17) * fullTicket;

    const totalRevenue = revenuePenny + revenueFull;
    const rpl = totalRevenue / base;

    // cen√°rio atual (sem penny): todo mundo no controle
    const revenueCurrent = (base * fullCtrl) * fullTicket;
    const rplCurrent = revenueCurrent / base;

    const deltaRevenue = totalRevenue - revenueCurrent;
    const deltaPct = revenueCurrent > 0 ? (deltaRevenue / revenueCurrent) : 0;
    const deltaRPL = rpl - rplCurrent;

    const marginPerLead = rpl - cpl;
    const fixedPerLead = fixed / base;
    const cpaMax = rpl - fixedPerLead; // proxy de "teto por lead" se voc√™ quiser abater fixo na conta

    const beLeads = rpl > 0 ? (fixed / rpl) : Infinity; // break-even estrutural via receita/lead

    return {
      base, cpl, fixed, fullTicket,
      pennyConv, split5, split17, fullCtrl, fullBuyer,
      buyersTotal, buyers5, buyers17, nonBuyers,
      revenuePenny, revenueFull, totalRevenue,
      revenueCurrent, rpl, rplCurrent,
      deltaRevenue, deltaPct, deltaRPL,
      marginPerLead, fixedPerLead, cpaMax,
      beLeads,
      salesCtrl, sales5, sales17
    };
  }

  // ============================
  // NOVO: KPIs + Charts
  // ============================
  let mixBuyersChart, revenueSplitChart;
  let heatMode = 'rpl'; // 'rpl' | 'margin'

  function upsertCharts(model) {
    // Chart A: mix buyers (doughnut)
    const ctxMix = document.getElementById('mixBuyersChart')?.getContext('2d');
    if (ctxMix) {
      const dataMix = [model.buyers5, model.buyers17];

      if (!mixBuyersChart) {
        mixBuyersChart = new Chart(ctxMix, {
          type: 'doughnut',
          data: {
            labels: ['Compradores R$ 5', 'Compradores R$ 17'],
            datasets: [{
              data: dataMix,
              backgroundColor: ['#4338ca', '#0d9488'],
              borderWidth: 0,
              hoverOffset: 4
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            cutout: '65%',
            plugins: {
              legend: { position: 'bottom' },
              tooltip: {
                callbacks: {
                  label: (ctx) => {
                    const v = ctx.parsed || 0;
                    return `${ctx.label}: ${v.toLocaleString('pt-BR', { maximumFractionDigits: 0 })}`;
                  }
                }
              }
            }
          }
        });
      } else {
        mixBuyersChart.data.datasets[0].data = dataMix;
        mixBuyersChart.update();
      }
    }

    // Chart B: revenue split (stacked bar)
    const ctxRev = document.getElementById('revenueSplitChart')?.getContext('2d');
    if (ctxRev) {
      const penny = model.revenuePenny;
      const full = model.revenueFull;

      if (!revenueSplitChart) {
        revenueSplitChart = new Chart(ctxRev, {
          type: 'bar',
          data: {
            labels: ['Receita Total'],
            datasets: [
              { label: 'Penny', data: [penny], backgroundColor: '#f59e0b', borderRadius: 8 },
              { label: 'Full', data: [full], backgroundColor: '#0d9488', borderRadius: 8 }
            ]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { position: 'top' },
              tooltip: {
                callbacks: {
                  label: (ctx) => `${ctx.dataset.label}: ${formatBRL(ctx.parsed.y)}`
                }
              }
            },
            scales: {
              x: { stacked: true },
              y: {
                stacked: true,
                beginAtZero: true,
                ticks: { callback: (v) => 'R$ ' + (v/1000).toFixed(0) + 'k' }
              }
            }
          }
        });
      } else {
        revenueSplitChart.data.datasets[0].data = [penny];
        revenueSplitChart.data.datasets[1].data = [full];
        revenueSplitChart.update();
      }
    }
  }

  function upsertKpis(model) {
    const elTotal = document.getElementById('kpiTotalRevenue');
    const elTotalNote = document.getElementById('kpiTotalRevenueNote');

    const elRPL = document.getElementById('kpiRPL');
    const elMargin = document.getElementById('kpiMargin');

    const elInc = document.getElementById('kpiIncrement');
    const elIncNote = document.getElementById('kpiIncrementNote');

    const elBE = document.getElementById('kpiBE');
    const elCPAMax = document.getElementById('kpiCPAMax');

    if (elTotal) elTotal.textContent = formatBRL(model.totalRevenue);
    if (elTotalNote) {
      elTotalNote.textContent =
        `Penny: ${formatBRL(model.revenuePenny)} ‚Ä¢ Full: ${formatBRL(model.revenueFull)}`;
    }

    if (elRPL) elRPL.textContent = formatBRL(model.rpl);
    if (elMargin) {
      elMargin.textContent =
        `Margem/Lead: ${formatBRL(model.marginPerLead)} ‚Ä¢ RPL atual: ${formatBRL(model.rplCurrent)}`;
    }

    if (elInc) elInc.textContent = formatBRL(model.deltaRevenue);
    if (elIncNote) {
      elIncNote.textContent =
        `Incremento: ${(model.deltaPct*100).toFixed(0)}% ‚Ä¢ RPL adicional: ${formatBRL(model.deltaRPL)}`;
    }

    if (elBE) elBE.textContent = `${Math.ceil(model.beLeads).toLocaleString('pt-BR')} leads`;
    if (elCPAMax) {
      elCPAMax.textContent =
        `Custo fixo/lead: ${formatBRL(model.fixedPerLead)} ‚Ä¢ ‚ÄúCPA m√°x‚Äù proxy: ${formatBRL(model.cpaMax)}`;
    }
  }

  // ============================
  // NOVO: Heatmap (Sensibilidade)
  // ============================
  function buildHeatmap(baseParams) {
    // eixo X: conv full (controle)
    const xs = [0.8, 1.0, 1.7, 2, 3, 4, 5, 6, 7, 8].map(pctToDec);

    // eixo Y: % penny total
    const ys = [2, 3, 4, 5, 6].map(pctToDec);

    // gera valores e pega min/max para color scale
    const values = [];
    ys.forEach(y => {
      xs.forEach(x => {
        const p = { ...baseParams, pennyConv: y, fullCtrl: x };
        const m = computeModel(p);
        values.push(heatMode === 'rpl' ? m.rpl : m.marginPerLead);
      });
    });

    const minV = Math.min(...values);
    const maxV = Math.max(...values);
    const span = (maxV - minV) || 1;

    function cellBg(v) {
      // escala 0..1
      const t = clamp01((v - minV) / span);
      // usa slate + brand para n√£o ‚Äúbrigar‚Äù com o resto
      // (sem customizar cor via chart, aqui √© CSS inline simples)
      const alpha = 0.08 + t * 0.35;
      return `rgba(13, 148, 136, ${alpha})`; // teal
    }

    let html = `
      <table class="w-full text-sm border-collapse">
        <thead>
          <tr>
            <th class="text-left p-3 border-b border-slate-200 bg-slate-50 sticky left-0 z-10">Penny \\ Full</th>
            ${xs.map(x => `<th class="p-3 border-b border-slate-200 bg-slate-50 text-center">${(x*100).toFixed(1)}%</th>`).join('')}
          </tr>
        </thead>
        <tbody>
          ${ys.map(y => {
            return `
              <tr>
                <td class="p-3 border-b border-slate-100 bg-white sticky left-0 z-10 font-semibold text-slate-700">
                  ${(y*100).toFixed(0)}%
                </td>
                ${xs.map(x => {
                  const p = { ...baseParams, pennyConv: y, fullCtrl: x };
                  const m = computeModel(p);
                  const v = heatMode === 'rpl' ? m.rpl : m.marginPerLead;
                  const label = heatMode === 'rpl' ? formatBRL(v) : formatBRL(v);
                  const sub = heatMode === 'rpl'
                    ? `ŒîRPL: ${formatBRL(m.deltaRPL)}`
                    : `RPL: ${formatBRL(m.rpl)}`;

                  return `
                    <td class="p-3 border-b border-slate-100 text-center" style="background:${cellBg(v)}">
                      <div class="font-bold text-slate-900">${label}</div>
                      <div class="text-xs text-slate-600 mt-1">${sub}</div>
                    </td>
                  `;
                }).join('')}
              </tr>
            `;
          }).join('')}
        </tbody>
      </table>
    `;

    const container = document.getElementById('heatmapContainer');
    if (container) container.innerHTML = html;
  }

  // ============================
  // NOVO: Orquestra√ß√£o
  // ============================
  function getParamsFromInputs() {
    const base = asNumber('inpBase');
    const cpl = asNumber('inpCPL');
    const fixed = asNumber('inpFixed');
    const fullTicket = asNumber('inpFullTicket');

    const pennyConv = pctToDec(asNumber('inpPennyConv'));
    const split5 = pctToDec(asNumber('inpSplit5'));

    const fullCtrl = pctToDec(asNumber('inpFullCtrl'));
    const fullBuyer = pctToDec(asNumber('inpFullBuyer'));

    return {
      base,
      cpl,
      fixed,
      fullTicket,
      pennyConv,
      split5: clamp01(split5),
      fullCtrl: clamp01(fullCtrl),
      fullBuyer: clamp01(fullBuyer)
    };
  }

  function refreshAll() {
    const params = getParamsFromInputs();
    const model = computeModel(params);

    upsertKpis(model);
    upsertCharts(model);
    buildHeatmap(params);
  }

  function bindInputs() {
    const ids = [
      'inpBase','inpCPL','inpFixed','inpFullTicket',
      'inpPennyConv','inpSplit5','inpFullCtrl','inpFullBuyer'
    ];

    ids.forEach(id => {
      const el = document.getElementById(id);
      if (!el) return;
      el.addEventListener('input', () => refreshAll());
    });

    const btnRPL = document.getElementById('btnHeatRPL');
    const btnMargin = document.getElementById('btnHeatMargin');

    if (btnRPL && btnMargin) {
      btnRPL.addEventListener('click', () => {
        heatMode = 'rpl';
        btnRPL.className = 'px-3 py-2 rounded-lg bg-slate-900 text-white';
        btnMargin.className = 'px-3 py-2 rounded-lg bg-white border border-slate-300 text-slate-700';
        refreshAll();
      });

      btnMargin.addEventListener('click', () => {
        heatMode = 'margin';
        btnMargin.className = 'px-3 py-2 rounded-lg bg-slate-900 text-white';
        btnRPL.className = 'px-3 py-2 rounded-lg bg-white border border-slate-300 text-slate-700';
        refreshAll();
      });
    }
  }

  // init
  bindInputs();
  refreshAll();
</script>

</body>
</html>
